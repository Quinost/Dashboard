@page "/users"
@attribute [Authorize(Roles = "Administrator")]

<MudTable Items="@UserList" Hover="true" SortLabel="Sort By" Loading="@_loading">
    <HeaderContent>
        <MudTh><MudTableSortLabel InitialDirection="SortDirection.Ascending" SortBy="new Func<UserModel, object>(x=>x.Id)">Id</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<UserModel, object>(x=>x.Username)">Username</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<UserModel, object>(x=>x.IsActive)">Is Active</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<UserModel, object>(x=>x.RoleId)">Role</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<UserModel, object>(x=>x.RefreshToken)">Refresh token</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<UserModel, object>(x=>x.RefreshTokenExpiry)">Refresh token expiry</MudTableSortLabel></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Id">@context.Id</MudTd>
        <MudTd DataLabel="Username">@context.Username</MudTd>
        <MudTd DataLabel="IsActive">@context.IsActive</MudTd>
        <MudTd DataLabel="Role">@RoleList.FirstOrDefault(v => v.Id == context.RoleId)?.Name</MudTd>
        <MudTd DataLabel="Refresh token">@context.RefreshToken</MudTd>
        <MudTd DataLabel="Refresh token expiry">@context.RefreshTokenExpiry</MudTd>
    </RowTemplate>
    <PagerContent>
        <MudTablePager PageSizeOptions="new int[]{10, 50, 100}" />
    </PagerContent>
</MudTable>
